<svg width="1400" height="760" viewBox="0 0 1400 760" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Platform architecture topology">
  <defs>
    <linearGradient id="bg" x1="0" y1="0" x2="1400" y2="760" gradientUnits="userSpaceOnUse">
      <stop offset="0" stop-color="#F8FAFC"/>
      <stop offset="1" stop-color="#E2E8F0"/>
    </linearGradient>
    <linearGradient id="edge" x1="0" y1="0" x2="420" y2="190" gradientUnits="userSpaceOnUse">
      <stop offset="0" stop-color="#0EA5E9"/>
      <stop offset="1" stop-color="#0369A1"/>
    </linearGradient>
    <linearGradient id="api" x1="0" y1="0" x2="430" y2="210" gradientUnits="userSpaceOnUse">
      <stop offset="0" stop-color="#22C55E"/>
      <stop offset="1" stop-color="#15803D"/>
    </linearGradient>
    <linearGradient id="worker" x1="0" y1="0" x2="280" y2="120" gradientUnits="userSpaceOnUse">
      <stop offset="0" stop-color="#F97316"/>
      <stop offset="1" stop-color="#C2410C"/>
    </linearGradient>
    <linearGradient id="store" x1="0" y1="0" x2="240" y2="110" gradientUnits="userSpaceOnUse">
      <stop offset="0" stop-color="#6366F1"/>
      <stop offset="1" stop-color="#4338CA"/>
    </linearGradient>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="4" orient="auto">
      <path d="M0,0 L8,4 L0,8 Z" fill="#334155"/>
    </marker>
  </defs>

  <rect width="1400" height="760" fill="url(#bg)"/>

  <text x="46" y="62" fill="#0F172A" font-family="Segoe UI, Arial, sans-serif" font-size="36" font-weight="700">
    FlyingDarkDevTunnel Architecture
  </text>
  <text x="46" y="98" fill="#334155" font-family="Segoe UI, Arial, sans-serif" font-size="18" font-weight="400">
    Data Plane (Go) + Control Plane (Fastify/Workers) + Persistence + Operations
  </text>

  <rect x="44" y="132" width="1312" height="255" rx="22" fill="#E0F2FE" fill-opacity="0.75" stroke="#7DD3FC"/>
  <text x="66" y="164" fill="#0C4A6E" font-family="Segoe UI, Arial, sans-serif" font-size="20" font-weight="700">Edge and Traffic Layer</text>

  <rect x="76" y="192" width="250" height="138" rx="16" fill="#F0FDF4" stroke="#86EFAC"/>
  <text x="95" y="238" fill="#166534" font-family="Segoe UI, Arial, sans-serif" font-size="24" font-weight="700">Public Internet</text>
  <text x="95" y="264" fill="#15803D" font-family="Segoe UI, Arial, sans-serif" font-size="15">Users, webhooks, APIs, IoT clients</text>

  <rect x="412" y="174" width="382" height="174" rx="18" fill="url(#edge)"/>
  <text x="444" y="228" fill="#F0F9FF" font-family="Segoe UI, Arial, sans-serif" font-size="30" font-weight="700">Go Relay Edge</text>
  <text x="444" y="260" fill="#E0F2FE" font-family="Segoe UI, Arial, sans-serif" font-size="16">HTTP / HTTPS / TCP ingress</text>
  <text x="444" y="284" fill="#E0F2FE" font-family="Segoe UI, Arial, sans-serif" font-size="16">Policy checks, routing, backpressure</text>

  <rect x="888" y="174" width="436" height="174" rx="18" fill="#FFF7ED" stroke="#FDBA74"/>
  <text x="918" y="228" fill="#9A3412" font-family="Segoe UI, Arial, sans-serif" font-size="30" font-weight="700">Go Agent CLI/Daemon</text>
  <text x="918" y="260" fill="#C2410C" font-family="Segoe UI, Arial, sans-serif" font-size="16">Persistent control websocket</text>
  <text x="918" y="284" fill="#C2410C" font-family="Segoe UI, Arial, sans-serif" font-size="16">Forwards requests to local target service</text>

  <line x1="326" y1="258" x2="402" y2="258" stroke="#334155" stroke-width="3" marker-end="url(#arrow)"/>
  <line x1="794" y1="258" x2="878" y2="258" stroke="#334155" stroke-width="3" marker-end="url(#arrow)"/>

  <rect x="44" y="414" width="1312" height="298" rx="22" fill="#ECFEFF" fill-opacity="0.85" stroke="#67E8F9"/>
  <text x="66" y="448" fill="#155E75" font-family="Segoe UI, Arial, sans-serif" font-size="20" font-weight="700">Control Plane and Operations</text>

  <rect x="78" y="484" width="448" height="192" rx="18" fill="url(#api)"/>
  <text x="110" y="536" fill="#F0FDF4" font-family="Segoe UI, Arial, sans-serif" font-size="30" font-weight="700">Fastify API</text>
  <text x="110" y="566" fill="#DCFCE7" font-family="Segoe UI, Arial, sans-serif" font-size="16">Auth, tunnels, domains, billing, admin</text>
  <text x="110" y="591" fill="#DCFCE7" font-family="Segoe UI, Arial, sans-serif" font-size="16">Agent token issuance and policy orchestration</text>

  <rect x="562" y="484" width="240" height="96" rx="14" fill="url(#store)"/>
  <text x="592" y="542" fill="#EEF2FF" font-family="Segoe UI, Arial, sans-serif" font-size="25" font-weight="700">PostgreSQL</text>

  <rect x="828" y="484" width="240" height="96" rx="14" fill="url(#store)"/>
  <text x="894" y="542" fill="#EEF2FF" font-family="Segoe UI, Arial, sans-serif" font-size="25" font-weight="700">Redis</text>

  <rect x="1094" y="484" width="240" height="96" rx="14" fill="url(#store)"/>
  <text x="1180" y="542" fill="#EEF2FF" font-family="Segoe UI, Arial, sans-serif" font-size="25" font-weight="700">S3</text>

  <rect x="562" y="602" width="240" height="74" rx="12" fill="url(#worker)"/>
  <text x="596" y="648" fill="#FFF7ED" font-family="Segoe UI, Arial, sans-serif" font-size="21" font-weight="700">Billing Worker</text>

  <rect x="828" y="602" width="240" height="74" rx="12" fill="url(#worker)"/>
  <text x="852" y="648" fill="#FFF7ED" font-family="Segoe UI, Arial, sans-serif" font-size="21" font-weight="700">Inspector Worker</text>

  <rect x="1094" y="602" width="240" height="74" rx="12" fill="url(#worker)"/>
  <text x="1116" y="648" fill="#FFF7ED" font-family="Segoe UI, Arial, sans-serif" font-size="21" font-weight="700">Certificates Worker</text>

  <line x1="526" y1="543" x2="552" y2="543" stroke="#334155" stroke-width="2.5" marker-end="url(#arrow)"/>
  <line x1="526" y1="543" x2="818" y2="543" stroke="#334155" stroke-width="2.5" marker-end="url(#arrow)"/>
  <line x1="526" y1="543" x2="1084" y2="543" stroke="#334155" stroke-width="2.5" marker-end="url(#arrow)"/>

  <line x1="526" y1="627" x2="552" y2="627" stroke="#334155" stroke-width="2.5" marker-end="url(#arrow)"/>
  <line x1="526" y1="627" x2="818" y2="627" stroke="#334155" stroke-width="2.5" marker-end="url(#arrow)"/>
  <line x1="526" y1="627" x2="1084" y2="627" stroke="#334155" stroke-width="2.5" marker-end="url(#arrow)"/>
</svg>
